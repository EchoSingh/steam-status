name: Update Steam Card Daily

on:
  schedule:
    # Runs at 9:00 AM IST (3:30 AM UTC) every day
    - cron: '30 3 * * *'
  workflow_dispatch: # Allows manual trigger

jobs:
  trigger-update:
    runs-on: ubuntu-latest
    
    steps:
      - name: Trigger Vercel Deployment
        run: |
          echo "Daily update trigger at IST time"
          # This will be picked up by Vercel's cache invalidation
          
      - name: Cache Bust Steam Cards
        run: |
          # You can add specific Steam IDs here to bust cache
          # curl "https://your-domain.vercel.app/card?steamid=YOUR_ID&t=$(date +%s)"
          echo "Cache busted at $(TZ=Asia/Kolkata date)"
          
      - name: Notify
        run: |
          echo "âœ… Steam cards will refresh on next request"
          echo "Triggered at: $(TZ=Asia/Kolkata date '+%Y-%m-%d %H:%M:%S IST')"
